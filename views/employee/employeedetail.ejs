<!DOCTYPE html>
<html lang="en">
<link href='https://fonts.googleapis.com/css?family=Kanit&subset=thai,latin' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="/public/stylesheets/middle account/middledetail.css">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>รายละเอียดโต๊ะ</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
    integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
    integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
    crossorigin="anonymous"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
    integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
    integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
    crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js"
    integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
    crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>

    <style>
        .scrollbar {
            background-color: #ffffff;
            float: left;
            height: 40rem;
            margin-top: 15px;
            width: 100%;
            overflow-y: scroll;
        }

        .force-overflow {
            min-height: 450px;
            padding: 0px 10px 10px 10px;
            font-size: 25px
        }

        #style-1::-webkit-scrollbar-track {
            -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);
            background-color: #F5F5F5;
        }
    </style>
</head>

<body style="background-color: orange;">
    <div style="background-color: rgb(255, 223, 162); padding: 30px; margin: 15px; height: auto; border-radius: 10px;">
        <a href="/employee/index" class="btn btn-danger" type="button">ย้อนกลับ</a>
        <% Object.values(tabledetail).forEach(function(item) { %>
            <div style="text-align: center; font-size: 40px; margin: 10px;">
                โต๊ะที่ : <%=item.tableid%>
            </div>
            

            <div style="background-color: rgb(247, 161, 86); width: 100%; height: auto; padding: 20px;">
                <div style="font-size: 30px; margin: 10px; text-align: center; ">รายละเอียดเมนู</div>


                    <div class="card" style="">
                        <ul class="list-group list-group-flush">
                            <% Object.values(item.order).forEach(function(itemorder,index) { %>
                                <input type="text" hidden value="<%=itemorder%>" id="orderone">
                                <li class="list-group-item" style="font-size: 20px; margin: 10px;">
                                    เมนู : <%= itemorder.menuname %> <br>
                                        จำนวน : X <%= itemorder.set %> <br>

                                            ราคาเมนู : <%= itemorder.menuprice %> ฿<br>

                                                รายละเอียดอาหาร : <%= itemorder.comment %> <br>

                                                    ราคารวมเมนู : <%= itemorder.totalprice %> <br>
                                                        <input type="text" value="<%=itemorder.totalprice%>"
                                                            id="ordertotalprice" name="ordertotalprice" hidden>
                                                        ------------------------------<br>
                                                        <% Object.values(itemorder.option).forEach(function(itemoption){
                                                            %>
                                                            ชื่อเมนูเสริม : <%= itemoption.name %>
                                                                <input type="text" hidden value="<%=itemoption.price%>"
                                                                    id="optionprice" name="optionprice">
                                                                ราคา : <%= itemoption.price %> ฿<br>
                                                                    <% }) %>
                                                                        <a class="btn btn-danger"
                                                                            href="/employee/deletemenu/<%=itemorder._id%>/<%=item.tableid%> ">ลบ</a>


                                                                        <% }) %>
                                </li>
                        </ul>

                    </div>
                
                <div style="font-size: 25px; text-align: center; margin: 10px; color: #F5F5F5;">
                    ราคาอาหารรวม : <span value="sumprice" id="sumprice" name="sumprice"></span>&nbsp;บาท <br>
                </div>
            </div>

            <% }) %>


    </div>
    <script>
        //คำนวนค่าอาหาร
        let sumtotal = 0;
        let optiontotal = 0;
        let optionsum = document.querySelectorAll("#optionprice");
        let totalsum = document.querySelectorAll("#ordertotalprice");

        totalsum.forEach(function (item) {
            console.log(item.value);
            sumtotal = parseInt(sumtotal) + parseInt(item.value);
        });

        optionsum.forEach(function (itemop) {
            console.log(itemop.value);
            optiontotal = parseInt(optiontotal) + parseInt(itemop.value);
        });

        console.log(optiontotal);
        console.log(sumtotal);
        sum = parseInt(optiontotal) + parseInt(sumtotal);
        console.log(sum);
        document.getElementById("sumprice").innerHTML = sum;
    </script>

</body>

</html>